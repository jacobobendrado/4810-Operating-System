# Interrupts

### What they are
They are signals from a device to the CPU telling it to immediately stop what it's doing to do something else.
This can include things like a keyboard or hard drive.

### Mechanics
In x86 protected mode, there is an Interrupt Descriptor Table (IDT) that can have up to 256 entries.
Once the CPU finds the entry for the interrupt, it jumps to the code the entry points to.
This code is an Interrupt Service Routine or an interrupt handler.

### Types of Interrupts
Exceptions are generated by the CPU to alert kernel.
Page faults are one example of these.
The first 32 interrupts are usually reserved for exceptions.

Interrupt Requests (IRQs) are generated by the chipset.
They can either by statically linked, or a value can be written to a memory location with Message Signaled Interrupts.

Software Interrupts are generated by software running on the CPU to get the kernel's attention.
These are what are used for system calls.

### Programmable Interrupt Controller
The PIC is told by a device to cause an interrupt.
The PIC is supposed to decide whether the CPU should be notified and to send the interrupt number to the CPU.
Once the interrupt is handled, it's the CPU's job to let the PIC know that it can resume sending interrupts.

On most older systems that would still be encountered, there are 15 IRQs available.
Each of the interrupts have a label given, from IRQ 0 to IRQ 15, where IRQ 2 should not be used because of a side effect of chaining multiple chips together.
IRQs 0 through 7 initially go to 08h through 0Fh, and IRQs 8 through 15 are set to 70h through 77h.
Because the first set of IRQs are mapped to the part of the IDT that is generally reserved for exceptions, they are often remapped, such as to 78h through 7Fh.

# Resources
[OSDev](https://wiki.osdev.org/Interrupts)
[Random Site](http://wearcam.org/seatsale/programs/www.beyondlogic.org/interrupts/interupt.htm)